# 图片拼接 App

一个功能强大的Android图片拼接应用，支持多张图片的横向和纵向拼接。

## 功能特点

### 核心功能
- **多图导入**：支持一次选择并导入多张图片
- **灵活布局**：支持横向和纵向两种拼接模式，可随时切换
- **精确裁剪**：每张图片都有可拖动的裁剪滑块，可精确控制显示范围
- **图片管理**：
  - 删除不需要的图片
  - 上移/下移（纵向模式）
  - 左移/右移（横向模式）
- **撤销功能**：支持操作撤销，最多保存20步历史记录
- **保存图片**：将拼接好的图片保存到相册

### 交互细节
- 每张图片左上角有控制按钮组：
  - 🗑️ 删除按钮
  - ⬆️ 上移/⬅️ 左移按钮
  - ⬇️ 下移/➡️ 右移按钮
- 图片交接处有裁剪滑块，可以裁去不需要的部分
- 顶部工具栏包含：
  - 📷 导入图片
  - 🔄 切换横竖方向
  - ↩️ 撤销
  - 💾 保存

## 技术实现

### 架构
- **语言**：Kotlin
- **最低SDK**：24 (Android 7.0)
- **目标SDK**：34 (Android 14)

### 主要组件
- `MainActivity`：主界面，管理所有操作
- `CropImageView`：自定义ImageView，支持裁剪滑块
- `ImageStitchAdapter`：RecyclerView适配器，管理图片列表
- `UndoManager`：撤销管理器
- `BitmapUtils`：图片处理工具类

### 权限
- `READ_EXTERNAL_STORAGE`：读取图片（Android 12及以下）
- `READ_MEDIA_IMAGES`：读取图片（Android 13及以上）
- `WRITE_EXTERNAL_STORAGE`：保存图片（Android 9及以下）

## 使用说明

1. **导入图片**
   - 点击顶部的"📷"按钮
   - 从相册中选择多张图片

2. **调整图片**
   - 点击图片左上角的删除按钮可删除该图片
   - 点击上下/左右箭头调整图片顺序
   - 拖动图片边缘的滑块裁剪不需要的部分

3. **切换方向**
   - 点击"🔄"按钮在横向和纵向拼接之间切换

4. **撤销操作**
   - 点击"↩️"按钮撤销上一步操作

5. **保存图片**
   - 点击"💾保存"按钮
   - 图片将保存到相册的ImageStitcher文件夹中

## 构建项目

1. 克隆项目到本地
2. 使用Android Studio打开项目
3. 等待Gradle同步完成
4. 连接Android设备或启动模拟器
5. 点击运行按钮

## 注意事项

- 首次保存图片时需要授予存储权限
- 建议不要一次性导入过多大图，以免内存溢出
- 图片会被自动缩放以优化性能

## 未来改进

- [ ] 支持更多图片格式
- [ ] 添加图片旋转功能
- [ ] 支持添加文字水印
- [ ] 支持自定义背景色
- [ ] 优化大图处理性能
